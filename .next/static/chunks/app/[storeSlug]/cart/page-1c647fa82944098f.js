(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{3515:function(e,t,s){Promise.resolve().then(s.bind(s,194))},194:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return B}});var a=s(6047),r=s(418),l=s(7261),n=s(5116),c=s(4363),o=s(2919),i=s(6727),d=s(1658),m=s(5779),u=s(8591),x=s(7912),h=s(7027),f=s(5835),g=s(9910),p=s(7929),y=s(1509),b=s(2443),j=s(4518),N=s(5840),v=s(8614);function w(e){var t;let{store:s,storeSlug:l}=e,[o,d]=(0,r.useState)(!1),{itemCount:h}=(0,i.j)(),f=(null==s?void 0:null===(t=s.Business)||void 0===t?void 0:t.business_name)||"Store";return(0,a.jsx)("header",{className:"bg-white border-b border-gray-100 sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 sm:h-20",children:[(0,a.jsx)(c.default,{href:"/".concat(l),className:"flex items-center",children:(0,a.jsx)(n.default,{src:(null==s?void 0:s.business_logo)||"/logo-2.png",alt:f,width:150,height:50,className:"h-10 sm:h-12 w-auto",priority:!0})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-6 lg:space-x-8",children:[(0,a.jsx)(c.default,{href:"/".concat(l),className:"text-gray-800 hover:text-[#6B9B37] font-medium transition-colors",children:"Home"}),(0,a.jsx)(c.default,{href:"/".concat(l,"/about"),className:"text-gray-800 hover:text-[#6B9B37] font-medium transition-colors",children:"About Us"}),(0,a.jsx)(c.default,{href:"/".concat(l,"/contact"),className:"text-gray-800 hover:text-[#6B9B37] font-medium transition-colors",children:"Contact Us"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,a.jsxs)(c.default,{href:"/".concat(l,"/cart"),className:"relative p-2 text-[#6B9B37] hover:text-[#4A7A1A] transition-colors",children:[(0,a.jsx)(m.Z,{className:"w-6 h-6 sm:w-7 sm:h-7",strokeWidth:1.5}),h>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 bg-[#6B9B37] text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:h>99?"99+":h})]}),(0,a.jsx)("button",{className:"md:hidden p-2 text-gray-800 hover:text-[#6B9B37] transition-colors",onClick:()=>d(!o),children:o?(0,a.jsx)(u.Z,{className:"w-6 h-6"}):(0,a.jsx)(x.Z,{className:"w-6 h-6"})})]})]}),o&&(0,a.jsx)("nav",{className:"md:hidden py-4 border-t border-gray-100",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,a.jsx)(c.default,{href:"/".concat(l),className:"text-gray-800 hover:text-[#6B9B37] font-medium py-2",onClick:()=>d(!1),children:"Home"}),(0,a.jsx)(c.default,{href:"/".concat(l,"/about"),className:"text-gray-800 hover:text-[#6B9B37] font-medium py-2",onClick:()=>d(!1),children:"About Us"}),(0,a.jsx)(c.default,{href:"/".concat(l,"/contact"),className:"text-gray-800 hover:text-[#6B9B37] font-medium py-2",onClick:()=>d(!1),children:"Contact Us"})]})})]})})}function B(){let e=(0,l.useParams)(),t=(0,l.useRouter)(),s=e.storeSlug,[m,u]=(0,r.useState)(null),[x,B]=(0,r.useState)([]),[k,_]=(0,r.useState)(!0),{cart:C,isLoading:S,error:Z,itemCount:A,setStoreSlug:F,updateCartItem:q,removeCartItem:M,clearCart:E,updateContactInfo:P}=(0,i.j)(),[X,O]=(0,r.useState)((null==C?void 0:C.customer_email)||""),[R,z]=(0,r.useState)((null==C?void 0:C.customer_phone)||""),[T,L]=(0,r.useState)(!1),[U,D]=(0,r.useState)(!1),[H,I]=(0,r.useState)(!1),[V,G]=(0,r.useState)(!1),[Y,W]=(0,r.useState)(null),[J,K]=(0,r.useState)(null),[Q,$]=(0,r.useState)({customer_name:"",customer_email:"",customer_phone:"",customer_location:"",message:""});(0,r.useEffect)(()=>{F(s)},[s,F]),(0,r.useEffect)(()=>{(async function(){_(!0);try{let[e,t]=await Promise.all([o.Ae.getStore(s),o.Ae.getCategories(s).catch(()=>[])]);u(e),B(t)}catch(e){console.error("Error fetching store:",e)}finally{_(!1)}})()},[s]),(0,r.useEffect)(()=>{C&&(O(C.customer_email||""),z(C.customer_phone||""))},[C]),(0,r.useEffect)(()=>{if(V){let e=setTimeout(()=>{t.push("/".concat(s))},5e3);return()=>clearTimeout(e)}},[V,t,s]);let ee=e=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(e),et=async(e,t,s)=>{let a=Math.max(1,Math.min(10,t+s));a!==t&&await q(e,a)},es=async e=>{await M(e)},ea=async()=>{confirm("Are you sure you want to clear your cart?")&&await E()},er=async()=>{L(!0);try{await P(X,R)}catch(e){}finally{L(!1)}},el=async e=>{e.preventDefault(),I(!0),K(null);try{let e={customer_name:Q.customer_name,customer_email:Q.customer_email,customer_phone:Q.customer_phone,customer_location:Q.customer_location,items:en.map(e=>({product_id:e.product_id,quantity:e.quantity,price:e.price})),message:Q.message||void 0},a=await o.Ae.submitPurchaseRequest(s,e);if(a.success){var t;G(!0),W((null===(t=a.data)||void 0===t?void 0:t.reference_number)||null),await E()}else K(a.message||"Failed to submit order. Please try again.")}catch(e){K(e instanceof Error?e.message:"Failed to submit order. Please try again.")}finally{I(!1)}},en=(null==C?void 0:C.items)||[],ec=parseFloat((null==C?void 0:C.subtotal)||"0"),eo=parseFloat((null==C?void 0:C.total)||"0");return k?(0,a.jsx)("div",{className:"min-h-screen bg-[#FAFAF0] flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-10 h-10 animate-spin text-[#6B9B37]"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-[#FAFAF0] flex flex-col",children:[(0,a.jsx)(w,{store:m,storeSlug:s}),(0,a.jsx)("main",{className:"flex-grow",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 md:py-8",children:[(0,a.jsx)("nav",{className:"mb-4 sm:mb-6",children:(0,a.jsxs)(c.default,{href:"/".concat(s),className:"inline-flex items-center text-sm text-gray-600 hover:text-[#6B9B37] transition-colors",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"Continue Shopping"]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6 sm:mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Shopping Cart"}),en.length>0&&(0,a.jsx)("button",{onClick:ea,disabled:S,className:"text-sm text-red-500 hover:text-red-600 transition-colors disabled:opacity-50",children:"Clear Cart"})]}),Z&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700",children:Z}),S&&0===en.length?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(h.Z,{className:"w-8 h-8 animate-spin text-[#6B9B37]"})}):0===en.length?(0,a.jsxs)("div",{className:"text-center py-12 sm:py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(g.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Looks like you haven't added anything to your cart yet."}),(0,a.jsx)(c.default,{href:"/".concat(s),className:"inline-flex items-center justify-center px-6 py-3 bg-[#6B9B37] text-white font-medium rounded-lg hover:bg-[#4A7A1A] transition-colors",children:"Start Shopping"})]}):(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6 lg:gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2 space-y-4",children:en.map(e=>{var t,r,l,o;let i=(null===(r=e.product.images)||void 0===r?void 0:null===(t=r.find(e=>e.is_primary))||void 0===t?void 0:t.image_url)||(null===(o=e.product.images)||void 0===o?void 0:null===(l=o[0])||void 0===l?void 0:l.image_url)||"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400&h=400&fit=crop",d=e.quantity*e.price;return(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 sm:p-6 flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"relative w-full sm:w-24 h-40 sm:h-24 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:(0,a.jsx)(n.default,{src:i,alt:e.product.name,fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.default,{href:"/".concat(s,"/product/").concat(e.product_id),className:"font-medium text-gray-900 hover:text-[#6B9B37] transition-colors line-clamp-2",children:e.product.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[ee(e.price)," each"]})]}),(0,a.jsx)("button",{onClick:()=>es(e.id),disabled:S,className:"p-2 text-gray-400 hover:text-red-500 transition-colors disabled:opacity-50",children:(0,a.jsx)(p.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center border border-gray-200 rounded-lg",children:[(0,a.jsx)("button",{onClick:()=>et(e.id,e.quantity,-1),disabled:e.quantity<=1||S,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-10 text-center font-medium",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>et(e.id,e.quantity,1),disabled:e.quantity>=10||S,className:"p-2 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900",children:ee(d)})]})]})]},e.id)})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-6 sticky top-24",children:U?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Checkout"}),(0,a.jsx)("button",{onClick:()=>D(!1),className:"text-sm text-gray-600 hover:text-[#6B9B37] transition-colors",children:"â† Back to cart"})]}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[A," items"]}),(0,a.jsx)("span",{className:"text-lg font-bold text-gray-900",children:ee(eo)})]})}),J&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:J}),(0,a.jsxs)("form",{onSubmit:el,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),(0,a.jsx)("input",{type:"text",id:"customer_name",required:!0,value:Q.customer_name,onChange:e=>$(t=>({...t,customer_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#6B9B37] focus:border-transparent",placeholder:"Enter your full name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"customer_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,a.jsx)("input",{type:"email",id:"customer_email",required:!0,value:Q.customer_email,onChange:e=>$(t=>({...t,customer_email:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#6B9B37] focus:border-transparent",placeholder:"your@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"customer_phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,a.jsx)("input",{type:"tel",id:"customer_phone",required:!0,value:Q.customer_phone,onChange:e=>$(t=>({...t,customer_phone:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#6B9B37] focus:border-transparent",placeholder:"+234 XXX XXX XXXX"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"customer_location",className:"block text-sm font-medium text-gray-700 mb-1",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"Delivery Location *"]})}),(0,a.jsx)("input",{type:"text",id:"customer_location",required:!0,value:Q.customer_location,onChange:e=>$(t=>({...t,customer_location:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#6B9B37] focus:border-transparent",placeholder:"Enter your delivery address"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes (Optional)"}),(0,a.jsx)("textarea",{id:"message",rows:3,value:Q.message,onChange:e=>$(t=>({...t,message:e.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#6B9B37] focus:border-transparent resize-none",placeholder:"Any special instructions for your order..."})]}),(0,a.jsx)("button",{type:"submit",disabled:H,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-[#6B9B37] text-white font-medium rounded-lg hover:bg-[#4A7A1A] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:H?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}),"Submitting Order..."]}):(0,a.jsxs)(a.Fragment,{children:["Submit Purchase Request",(0,a.jsx)(j.Z,{className:"w-4 h-4"})]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"By submitting, you agree to be contacted by the seller"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,a.jsx)("div",{className:"space-y-3 mb-4",children:(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Subtotal (",A," items)"]}),(0,a.jsx)("span",{className:"font-medium",children:ee(ec)})]})}),(0,a.jsx)("div",{className:"border-t border-gray-200 pt-4 mb-6",children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Total"}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:ee(eo)})]})}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-4 mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Contact Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email address",value:X,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#6B9B37] focus:border-transparent"}),(0,a.jsx)("input",{type:"tel",placeholder:"Phone number",value:R,onChange:e=>z(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#6B9B37] focus:border-transparent"}),(0,a.jsx)("button",{onClick:er,disabled:T,className:"w-full px-3 py-2 text-sm text-[#6B9B37] border border-[#6B9B37] rounded-lg hover:bg-[#6B9B37] hover:text-white transition-colors disabled:opacity-50",children:T?"Saving...":"Save Contact Info"})]})]}),(0,a.jsx)("button",{onClick:()=>{$(e=>({...e,customer_email:X||(null==C?void 0:C.customer_email)||"",customer_phone:R||(null==C?void 0:C.customer_phone)||""})),D(!0),K(null)},disabled:S||0===en.length,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-[#6B9B37] text-white font-medium rounded-lg hover:bg-[#4A7A1A] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S?(0,a.jsx)(h.Z,{className:"w-4 h-4 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:["Proceed to Checkout",(0,a.jsx)(j.Z,{className:"w-4 h-4"})]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Secure checkout powered by POSbok"})]})})})]}),V&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 sm:p-8 max-w-md w-full text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(v.Z,{className:"w-8 h-8 text-green-500"})}),(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"Order Submitted!"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Your purchase request has been sent to the seller. They will contact you shortly to confirm your order."}),Y&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Reference Number"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:Y})]}),(0,a.jsx)("button",{onClick:()=>t.push("/".concat(s)),className:"inline-flex items-center justify-center px-6 py-3 bg-[#6B9B37] text-white font-medium rounded-lg hover:bg-[#4A7A1A] transition-colors w-full",children:"Continue Shopping"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"Redirecting to store in a few seconds..."})]})})]})}),(0,a.jsx)(d.h,{store:m,storeSlug:s,categories:x})]})}},4518:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5977).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},5835:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5977).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},8614:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5977).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1509:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5977).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},2443:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5977).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9910:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5977).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},7929:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(5977).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[510,755,380,482,744],function(){return e(e.s=3515)}),_N_E=e.O()}]);